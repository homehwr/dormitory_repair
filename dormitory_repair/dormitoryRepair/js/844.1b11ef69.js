"use strict";(self["webpackChunkdormitory_repair"]=self["webpackChunkdormitory_repair"]||[]).push([[844],{4114:function(r,e,t){var o=t(6518),s=t(8981),a=t(6198),l=t(4527),i=t(6837),n=t(9039),c=n(function(){return 4294967297!==[].push.call({length:4294967296},1)}),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(r){return r instanceof TypeError}},d=c||!u();o({target:"Array",proto:!0,arity:1,forced:d},{push:function(r){var e=s(this),t=a(e),o=arguments.length;i(t+o);for(var n=0;n<o;n++)e[t]=arguments[n],t++;return l(e,t),t}})},4376:function(r,e,t){var o=t(2195);r.exports=Array.isArray||function(r){return"Array"===o(r)}},4527:function(r,e,t){var o=t(3724),s=t(4376),a=TypeError,l=Object.getOwnPropertyDescriptor,i=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(r){return r instanceof TypeError}}();r.exports=i?function(r,e){if(s(r)&&!l(r,"length").writable)throw new a("Cannot set read only .length");return r.length=e}:function(r,e){return r.length=e}},6837:function(r){var e=TypeError,t=9007199254740991;r.exports=function(r){if(r>t)throw e("Maximum allowed index exceeded");return r}},9844:function(r,e,t){t.r(e),t.d(e,{default:function(){return c}});var o=function(){var r=this,e=r._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],staticClass:"repair-record-container"},[e("div",{staticClass:"app-header"},[e("div",{staticClass:"header-content"},[e("div",{staticClass:"return-button",on:{click:r.back}},[e("i",{staticClass:"el-icon-arrow-left"})]),e("h1",{staticClass:"page-title"},[r._v("修改密码")])])]),e("div",[e("el-card",{staticClass:"box-card"},[e("el-form",{ref:"ruleForm",attrs:{model:r.ruleForm,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"旧密码",prop:"old"}},[e("el-input",{model:{value:r.ruleForm.old,callback:function(e){r.$set(r.ruleForm,"old",e)},expression:"ruleForm.old"}})],1),e("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[e("el-input",{model:{value:r.ruleForm.pass,callback:function(e){r.$set(r.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),e("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[e("el-input",{model:{value:r.ruleForm.checkPass,callback:function(e){r.$set(r.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.submitForm("ruleForm")}}},[r._v("提交")]),e("el-button",{on:{click:function(e){return r.resetForm("ruleForm")}}},[r._v("重置")])],1)],1)],1)],1)])},s=[],a=(t(4114),{data(){var r=(r,e,t)=>{if(!e)return t(new Error("旧密码不能为空"));t()},e=(r,e,t)=>{""===e?t(new Error("请输入新密码")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),t())},t=(r,e,t)=>{""===e?t(new Error("请再次输入新密码")):e!==this.ruleForm.pass?t(new Error("两次输入密码不一致!")):t()};return{ruleForm:{pass:"",checkPass:"",old:""},workerId:localStorage.getItem("dormitory_workerId"),duty:localStorage.getItem("dormitory_duty"),rules:{pass:[{validator:e,trigger:"blur"}],checkPass:[{validator:t,trigger:"blur"}],old:[{validator:r,trigger:"blur"}]}}},methods:{submitForm(r){this.$refs[r].validate(e=>{if(!e)return!1;this.$axios.post(`/user/resetPassword?id=${Number(this.workerId)}&old=${this.ruleForm.old}&newPW=${this.ruleForm.pass}`).then(e=>{200===e.data.code?(this.$message.success("修改密码成功！"),this.resetForm(r)):this.$message.error(e.data.data)}).catch(r=>{})})},resetForm(r){this.$refs[r].resetFields()},back(){this.$router.push({path:"/worker"})}}}),l=a,i=t(1656),n=(0,i.A)(l,o,s,!1,null,"fc2c43c8",null),c=n.exports}}]);
//# sourceMappingURL=844.1b11ef69.js.map