"use strict";(self["webpackChunkdormitory_repair"]=self["webpackChunkdormitory_repair"]||[]).push([[67],{4114:function(t,s,a){var i=a(6518),e=a(8981),r=a(6198),n=a(4527),o=a(6837),l=a(9039),c=l(function(){return 4294967297!==[].push.call({length:4294967296},1)}),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},d=c||!u();i({target:"Array",proto:!0,arity:1,forced:d},{push:function(t){var s=e(this),a=r(s),i=arguments.length;o(a+i);for(var l=0;l<i;l++)s[a]=arguments[l],a++;return n(s,a),a}})},4376:function(t,s,a){var i=a(2195);t.exports=Array.isArray||function(t){return"Array"===i(t)}},4527:function(t,s,a){var i=a(3724),e=a(4376),r=TypeError,n=Object.getOwnPropertyDescriptor,o=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,s){if(e(t)&&!n(t,"length").writable)throw new r("Cannot set read only .length");return t.length=s}:function(t,s){return t.length=s}},6837:function(t){var s=TypeError,a=9007199254740991;t.exports=function(t){if(t>a)throw s("Maximum allowed index exceeded");return t}},8067:function(t,s,a){a.r(s),a.d(s,{default:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"repair-record-container"},[s("div",{staticClass:"app-header"},[s("div",{staticClass:"header-content"},[s("div",{staticClass:"return-button",on:{click:t.back}},[s("i",{staticClass:"el-icon-arrow-left"})]),s("h1",{staticClass:"page-title"},[t._v("报修记录")])])]),s("div",{staticClass:"content-wrapper"},[0!==t.data_list.length||t.loading?s("div",t._l(t.data_list,function(a,i){return s("div",{key:i,staticClass:"record-card",on:{click:function(s){return t.toDetail(a.id)}}},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"repair-info"},[s("i",{staticClass:"el-icon-tickets info-icon"}),s("div",{staticClass:"info-text"},[t._v(t._s(a.info))])]),s("div",{staticClass:"status-tag",class:t.getStatusClass(a.status)},[t._v(" "+t._s(a.status)+" ")])]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"info-item"},[s("i",{staticClass:"el-icon-time icon"}),s("span",{staticClass:"label"},[t._v("报修时间：")]),s("span",{staticClass:"value"},[t._v(t._s(a.start_time))])]),s("div",{staticClass:"info-item"},[s("i",{staticClass:"el-icon-user-solid icon"}),s("span",{staticClass:"label"},[t._v("维修师傅：")]),s("span",{staticClass:"value"},[t._v(t._s(a.workerName||"待分配"))])]),a.workerPhone?s("div",{staticClass:"info-item"},[s("i",{staticClass:"el-icon-phone icon"}),s("span",{staticClass:"label"},[t._v("联系方式：")]),s("span",{staticClass:"value"},[t._v(t._s(a.workerPhone||"暂无电话"))])]):t._e()]),t._m(0,!0)])}),0):s("div",{staticClass:"empty-state"},[s("i",{staticClass:"el-icon-document-remove empty-icon"}),s("p",[t._v("暂无报修记录")]),s("el-button",{staticClass:"report-button",attrs:{type:"primary"},on:{click:t.goToRepair}},[t._v(" 我要报修 ")])],1)])])},e=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-footer"},[s("div",{staticClass:"footer-text"},[t._v("点击查看详情")]),s("i",{staticClass:"el-icon-arrow-right arrow-icon"})])}],r=(a(4114),{data(){return{data_list:[],loading:!0}},async mounted(){await this.$axios.get(`/student/getRecord?UUID=${localStorage.getItem("dormitory_repair_userId")}`).then(t=>{this.data_list=t.data.data;for(let s=0;s<this.data_list.length;s++){0===this.data_list[s].status?this.data_list[s].status="待维修":1===this.data_list[s].status?this.data_list[s].status="已维修":2===this.data_list[s].status?this.data_list[s].status="已取消":3===this.data_list[s].status&&(this.data_list[s].status="已转服务商");const t=this.data_list[s].start_time;t&&t.length>=19&&(this.data_list[s].start_time=t.substring(0,10)+" "+t.substring(11,19))}}).catch(t=>{console.error("获取报修记录失败:",t),this.$message.error("获取报修记录失败，请稍后重试")}),this.loading=!1},methods:{getStatusClass(t){switch(t){case"待维修":return"status-pending";case"已维修":return"status-completed";case"已取消":return"status-cancelled";case"已转服务商":return"status-transferred";default:return""}},back(){this.$router.push({path:"/stu/index"})},toDetail(t){this.$router.push({name:"stuDetail",params:{id:t}})},goToRepair(){this.$router.push({path:"/stu/repair"})}}}),n=r,o=a(1656),l=(0,o.A)(n,i,e,!1,null,"2bb135de",null),c=l.exports}}]);
//# sourceMappingURL=67.7a786651.js.map