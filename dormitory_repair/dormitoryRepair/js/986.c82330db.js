"use strict";(self["webpackChunkdormitory_repair"]=self["webpackChunkdormitory_repair"]||[]).push([[986],{7986:function(r,e,t){t.r(e),t.d(e,{default:function(){return c}});var s=function(){var r=this,e=r._self._c;return e("div",{staticClass:"set-password"},[e("div",{staticClass:"set-container1"},[e("el-card",{staticStyle:{height:"400px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[r._v("修改密码")]),e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:r.ruleForm,"status-icon":"",rules:r.rules,"label-width":"100px","label-position":"left"}},[e("el-form-item",{attrs:{label:"旧密码",prop:"old"}},[e("el-input",{attrs:{type:"password"},model:{value:r.ruleForm.old,callback:function(e){r.$set(r.ruleForm,"old",r._n(e))},expression:"ruleForm.old"}})],1),e("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[e("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:r.ruleForm.pass,callback:function(e){r.$set(r.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),e("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[e("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:r.ruleForm.checkPass,callback:function(e){r.$set(r.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.submitForm("ruleForm")}}},[r._v("提交")]),e("el-button",{on:{click:function(e){return r.resetForm("ruleForm")}}},[r._v("重置")])],1)],1)],1)],1)])},o=[],l={data(){var r=(r,e,t)=>{if(!e)return t(new Error("旧密码不能为空"));t()},e=(r,e,t)=>{""===e?t(new Error("请输入新密码")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),t())},t=(r,e,t)=>{""===e?t(new Error("请再次输入新密码")):e!==this.ruleForm.pass?t(new Error("两次输入密码不一致!")):t()};return{ruleForm:{pass:"",checkPass:"",old:""},workerId:localStorage.getItem("dormitory_workerId"),duty:localStorage.getItem("dormitory_duty"),rules:{pass:[{validator:e,trigger:"blur"}],checkPass:[{validator:t,trigger:"blur"}],old:[{validator:r,trigger:"blur"}]}}},methods:{submitForm(r){this.$refs[r].validate(e=>{if(!e)return console.log("提交失败，请稍后再试"),!1;this.$axios.post(`/user/resetPassword?id=${Number(this.workerId)}&old=${this.ruleForm.old}&newPW=${this.ruleForm.pass}`).then(e=>{console.log(e.data),200===e.data.code?(this.$message.success("修改密码成功！"),this.resetForm(r)):this.$message.error(e.data.data)}).catch(r=>{console.log(r)})})},resetForm(r){this.$refs[r].resetFields()}}},a=l,i=t(1656),u=(0,i.A)(a,s,o,!1,null,"18d1b751",null),c=u.exports}}]);
//# sourceMappingURL=986.c82330db.js.map