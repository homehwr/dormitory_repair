"use strict";(self["webpackChunkdormitory_repair"]=self["webpackChunkdormitory_repair"]||[]).push([[204],{6204:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card_container"},[t("el-card",[t("el-tabs",{attrs:{type:"border-card"}},[t("div",{staticClass:"area_header"},[e._v("  宿舍区域管理")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","overflow-y":"auto"},attrs:{data:e.buildings,height:"650","row-key":"key","header-cell-style":{background:"rgb(248,249,250)",color:"rgb(85,85,85)"},border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[t("el-table-column",{attrs:{prop:"genArea",label:"苑区",sortable:"",width:"220"}}),t("el-table-column",{attrs:{prop:"area",label:"宿舍楼号"}}),t("el-table-column",{attrs:{label:"操作",width:"350"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"middle"},on:{click:function(t){return e.edit(a.row)}}},[e._v("修改名称")]),a.row["genArea"]?t("el-button",{attrs:{type:"success",size:"middle"},on:{click:function(t){return e.add(a.row)}}},[e._v("新增楼栋")]):t("el-button",{attrs:{type:"danger",size:"middle"},on:{click:function(t){return e.remove(a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,25,50,100,200],"page-size":e.pageSize,layout:"total,   prev, pager, next, jumper",total:e.buildings.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},r=[],i={data(){return{address_options:[],filterAddress:"南苑",bian:!0,pageSize:20,currentPage:1,buildings:[],loading:!0}},mounted(){this.getAllArea()},methods:{async getAllArea(){this.loading=!0,await this.$axios.get("/area/getAllArea").then(e=>{this.buildings=e.data,this.loading=!1})},filterChange(){"全部"===this.filterCollege&&(this.tableData=this.AllTableData),"已维修"===this.filterCollege&&(this.tableData=this.PassedTableData),"待维修"===this.filterCollege&&(this.tableData=this.RepairTableData)},handleClick(e){console.log(e)},handleSizeChange(e){console.log(e,"size"),this.pageSize=e,console.log(this.pageSize)},handleCurrentChange(e){this.currentPage=e},edit(e){this.$prompt("请输入修改后的名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:t})=>{t.length>8?this.$message.error("输入字符不能超过8个！"):this.$axios.post(`/area/changeName?key=${e.key}&name=${t}`).then(e=>{200==e.data.code?(this.$message({type:"success",message:"修改成功！"}),this.getAllArea()):this.$message({type:"error",message:e.data.message})})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},add(e){console.log(e),this.$prompt(`请输入在“${e.genArea}”增加的楼栋的名称（例如：1栋、2栋等）`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:t})=>{t.length>8?this.$message.error("输入字符不能超过8个！"):this.$axios.post(`/area/addArea?name=${t}&key=${e.key}`).then(e=>{200==e.data.code?(this.$message({type:"success",message:"修改成功！"}),this.getAllArea()):this.$message({type:"error",message:e.data.message})})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},remove(e){console.log(e),this.$confirm("确定要删除这一楼栋信息吗？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{this.$axios.post(`/area/delArea?key=${e.key}`).then(e=>{200==e.data.code?(this.$message.success("删除成功！"),this.getAllArea()):this.$message.error("删除失败！")})}).catch(e=>{this.$message({type:"info",message:"已取消删除"})})}}},l=i,n=a(1656),o=(0,n.A)(l,s,r,!1,null,"6cc0b541",null),h=o.exports}}]);
//# sourceMappingURL=204.c9b23a47.js.map