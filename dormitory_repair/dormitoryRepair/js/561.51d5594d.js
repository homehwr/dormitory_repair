"use strict";(self["webpackChunkdormitory_repair"]=self["webpackChunkdormitory_repair"]||[]).push([[561],{507:function(t,e,r){var a=r(9565);t.exports=function(t,e,r){var s,i,n=r?t:t.iterator,o=t.next;while(!(s=a(o,n)).done)if(i=e(s.value),void 0!==i)return i}},1698:function(t,e,r){var a=r(6518),s=r(4204),i=r(9835),n=r(4916),o=!n("union")||!i("union");a({target:"Set",proto:!0,real:!0,forced:o},{union:s})},2475:function(t,e,r){var a=r(6518),s=r(8527),i=r(4916),n=!i("isSupersetOf",function(t){return!t});a({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:s})},2489:function(t,e,r){var a=r(6518),s=r(9565),i=r(9306),n=r(8551),o=r(1767),c=r(9462),l=r(6319),u=r(6395),d=r(9539),h=r(684),f=r(4549),p=!u&&!h("filter",function(){}),g=!u&&!p&&f("filter",TypeError),v=u||p||g,m=c(function(){var t,e,r,a=this.iterator,i=this.predicate,o=this.next;while(1){if(t=n(s(o,a)),e=this.done=!!t.done,e)return;if(r=t.value,l(a,i,[r,this.counter++],!0))return r}});a({target:"Iterator",proto:!0,real:!0,forced:v},{filter:function(t){n(this);try{i(t)}catch(e){d(this,"throw",e)}return g?s(g,this,t):new m(o(this),{predicate:t})}})},3440:function(t,e,r){var a=r(7080),s=r(4402),i=r(9286),n=r(5170),o=r(3789),c=r(8469),l=r(507),u=s.has,d=s.remove;t.exports=function(t){var e=a(this),r=o(t),s=i(e);return n(e)<=r.size?c(e,function(t){r.includes(t)&&d(s,t)}):l(r.getIterator(),function(t){u(s,t)&&d(s,t)}),s}},3650:function(t,e,r){var a=r(7080),s=r(4402),i=r(9286),n=r(3789),o=r(507),c=s.add,l=s.has,u=s.remove;t.exports=function(t){var e=a(this),r=n(t).getIterator(),s=i(e);return o(r,function(t){l(e,t)?u(s,t):c(s,t)}),s}},3789:function(t,e,r){var a=r(9306),s=r(8551),i=r(9565),n=r(1291),o=r(1767),c="Invalid size",l=RangeError,u=TypeError,d=Math.max,h=function(t,e){this.set=t,this.size=d(e,0),this.has=a(t.has),this.keys=a(t.keys)};h.prototype={getIterator:function(){return o(s(i(this.keys,this.set)))},includes:function(t){return i(this.has,this.set,t)}},t.exports=function(t){s(t);var e=+t.size;if(e!==e)throw new u(c);var r=n(e);if(r<0)throw new l(c);return new h(t,r)}},3838:function(t,e,r){var a=r(7080),s=r(5170),i=r(8469),n=r(3789);t.exports=function(t){var e=a(this),r=n(t);return!(s(e)>r.size)&&!1!==i(e,function(t){if(!r.includes(t))return!1},!0)}},3853:function(t,e,r){var a=r(6518),s=r(4449),i=r(4916),n=!i("isDisjointFrom",function(t){return!t});a({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:s})},4204:function(t,e,r){var a=r(7080),s=r(4402).add,i=r(9286),n=r(3789),o=r(507);t.exports=function(t){var e=a(this),r=n(t).getIterator(),c=i(e);return o(r,function(t){s(c,t)}),c}},4402:function(t,e,r){var a=r(9504),s=Set.prototype;t.exports={Set:Set,add:a(s.add),has:a(s.has),remove:a(s["delete"]),proto:s}},4449:function(t,e,r){var a=r(7080),s=r(4402).has,i=r(5170),n=r(3789),o=r(8469),c=r(507),l=r(9539);t.exports=function(t){var e=a(this),r=n(t);if(i(e)<=r.size)return!1!==o(e,function(t){if(r.includes(t))return!1},!0);var u=r.getIterator();return!1!==c(u,function(t){if(s(e,t))return l(u,"normal",!1)})}},4916:function(t,e,r){var a=r(7751),s=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},i=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var r=a("Set");try{(new r)[t](s(0));try{return(new r)[t](s(-1)),!1}catch(o){if(!e)return!0;try{return(new r)[t](i(-1/0)),!1}catch(c){var n=new r;return n.add(1),n.add(2),e(n[t](i(1/0)))}}}catch(c){return!1}}},5024:function(t,e,r){var a=r(6518),s=r(3650),i=r(9835),n=r(4916),o=!n("symmetricDifference")||!i("symmetricDifference");a({target:"Set",proto:!0,real:!0,forced:o},{symmetricDifference:s})},5170:function(t,e,r){var a=r(6706),s=r(4402);t.exports=a(s.proto,"size","get")||function(t){return t.size}},5876:function(t,e,r){var a=r(6518),s=r(3838),i=r(4916),n=!i("isSubsetOf",function(t){return t});a({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:s})},6369:function(t,e,r){var a=r(7080),s=r(4402),i=r(5170),n=r(3789),o=r(8469),c=r(507),l=s.Set,u=s.add,d=s.has;t.exports=function(t){var e=a(this),r=n(t),s=new l;return i(e)>r.size?c(r.getIterator(),function(t){d(e,t)&&u(s,t)}):o(e,function(t){r.includes(t)&&u(s,t)}),s}},6706:function(t,e,r){var a=r(9504),s=r(9306);t.exports=function(t,e,r){try{return a(s(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(i){}}},7080:function(t,e,r){var a=r(4402).has;t.exports=function(t){return a(t),t}},7642:function(t,e,r){var a=r(6518),s=r(3440),i=r(9039),n=r(4916),o=!n("difference",function(t){return 0===t.size}),c=o||i(function(){var t={size:1,has:function(){return!0},keys:function(){var t=0;return{next:function(){var r=t++>1;return e.has(1)&&e.clear(),{done:r,value:2}}}}},e=new Set([1,2,3,4]);return 3!==e.difference(t).size});a({target:"Set",proto:!0,real:!0,forced:c},{difference:s})},8004:function(t,e,r){var a=r(6518),s=r(9039),i=r(6369),n=r(4916),o=!n("intersection",function(t){return 2===t.size&&t.has(1)&&t.has(2)})||s(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))});a({target:"Set",proto:!0,real:!0,forced:o},{intersection:i})},8469:function(t,e,r){var a=r(9504),s=r(507),i=r(4402),n=i.Set,o=i.proto,c=a(o.forEach),l=a(o.keys),u=l(new n).next;t.exports=function(t,e,r){return r?s({iterator:l(t),next:u},e):c(t,e)}},8527:function(t,e,r){var a=r(7080),s=r(4402).has,i=r(5170),n=r(3789),o=r(507),c=r(9539);t.exports=function(t){var e=a(this),r=n(t);if(i(e)<r.size)return!1;var l=r.getIterator();return!1!==o(l,function(t){if(!s(e,t))return c(l,"normal",!1)})}},9286:function(t,e,r){var a=r(4402),s=r(8469),i=a.Set,n=a.add;t.exports=function(t){var e=new i;return s(t,function(t){n(e,t)}),e}},9561:function(t,e,r){r.r(e),r.d(e,{default:function(){return u}});r(8111),r(1701);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-container"},[e("div",{staticClass:"header"},[e("h1",[t._v("宿舍报修系统数据分析平台")]),e("div",{staticClass:"filters"},[e("div",{staticClass:"filter-item"},[e("label",[t._v("时间范围：")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.timeRange,expression:"timeRange"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.timeRange=e.target.multiple?r:r[0]}}},[e("option",{attrs:{value:"week"}},[t._v("最近一周")]),e("option",{attrs:{value:"month"}},[t._v("最近一月")]),e("option",{attrs:{value:"quarter"}},[t._v("最近三月")]),e("option",{attrs:{value:"year"}},[t._v("最近一年")])])]),e("div",{staticClass:"filter-item"},[e("label",[t._v("楼栋筛选：")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedBuilding,expression:"selectedBuilding"}],attrs:{multiple:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selectedBuilding=e.target.multiple?r:r[0]}}},[e("option",{attrs:{value:"all"}},[t._v("全部楼栋")]),t._l(t.buildings,function(r){return e("option",{key:r,domProps:{value:r}},[t._v(t._s(r))])})],2)]),e("div",{staticClass:"filter-item"},[e("label",[t._v("维修状态：")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedStatus,expression:"selectedStatus"}],attrs:{multiple:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selectedStatus=e.target.multiple?r:r[0]}}},[e("option",{attrs:{value:"all"}},[t._v("全部状态")]),t._l(t.statuses,function(r){return e("option",{key:r,domProps:{value:r}},[t._v(t._s(r))])})],2)]),e("button",{staticClass:"apply-btn",on:{click:t.applyFilters}},[t._v("应用筛选")]),e("button",{staticClass:"reset-btn",on:{click:t.resetFilters}},[t._v("重置筛选")])])]),e("div",{staticClass:"summary-cards"},[e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-content"},[e("h3",[t._v("总报修量")]),e("p",[t._v(t._s(t.summary.totalRepairs))])])]),e("div",{staticClass:"card"},[t._m(1),e("div",{staticClass:"card-content"},[e("h3",[t._v("待维修")]),e("p",[t._v(t._s(t.summary.pendingRepairs))])])]),e("div",{staticClass:"card"},[t._m(2),e("div",{staticClass:"card-content"},[e("h3",[t._v("已维修")]),e("p",[t._v(t._s(t.summary.completedRepairs))])])]),e("div",{staticClass:"card"},[t._m(3),e("div",{staticClass:"card-content"},[e("h3",[t._v("维修工数量")]),e("p",[t._v(t._s(t.summary.totalWorkers))])])])]),e("div",{staticClass:"charts-container"},[e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("报修类别分布")]),e("div",{staticClass:"chart-actions"},[e("button",{on:{click:function(e){return t.toggleChartType("category")}}},[t._v("切换图表")])])]),e("div",{staticClass:"chart-container"},["pie"===t.categoryChartType?e("div",{staticClass:"chart",attrs:{id:"category-pie-chart"}}):e("div",{staticClass:"chart",attrs:{id:"category-bar-chart"}})])]),e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("报修状态分布")]),e("div",{staticClass:"chart-actions"},[e("button",{on:{click:function(e){return t.toggleChartType("status")}}},[t._v("切换图表")])])]),t._m(4)]),e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("楼栋报修数量")]),e("div",{staticClass:"chart-actions"},[e("button",{on:{click:function(e){return t.sortBuildings("count")}}},[t._v("按数量排序")]),e("button",{on:{click:function(e){return t.sortBuildings("name")}}},[t._v("按名称排序")])])]),t._m(5)]),e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("维修工工作量")]),e("div",{staticClass:"chart-actions"},[e("button",{on:{click:function(e){return t.sortWorkers("total")}}},[t._v("按总量排序")]),e("button",{on:{click:function(e){return t.sortWorkers("pending")}}},[t._v("按待处理排序")])])]),t._m(6)]),e("div",{staticClass:"chart-card full-width"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("报修时间趋势")]),e("div",{staticClass:"chart-actions"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.trendType,expression:"trendType"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.trendType=e.target.multiple?r:r[0]}}},[e("option",{attrs:{value:"daily"}},[t._v("按日")]),e("option",{attrs:{value:"weekly"}},[t._v("按周")]),e("option",{attrs:{value:"monthly"}},[t._v("按月")])])])]),t._m(7)]),e("div",{staticClass:"chart-card full-width"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("热门报修问题")]),e("div",{staticClass:"chart-actions"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],attrs:{type:"text",placeholder:"搜索问题..."},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})])]),t._m(8)])]),e("div",{staticClass:"data-table"},[e("h3",[t._v("报修记录详情")]),e("div",{staticClass:"table-container"},[e("table",[e("thead",[e("tr",[e("th",{on:{click:function(e){return t.sortTable("id")}}},[t._v("ID")]),e("th",{on:{click:function(e){return t.sortTable("building")}}},[t._v("楼栋")]),e("th",{on:{click:function(e){return t.sortTable("category")}}},[t._v("类别")]),e("th",{on:{click:function(e){return t.sortTable("status")}}},[t._v("状态")]),e("th",{on:{click:function(e){return t.sortTable("time")}}},[t._v("报修时间")]),e("th",[t._v("问题描述")]),e("th",{on:{click:function(e){return t.sortTable("worker")}}},[t._v("维修工")]),e("th",{on:{click:function(e){return t.sortTable("reporter")}}},[t._v("报修人")])])]),e("tbody",t._l(t.paginatedRecords,function(r,a){return e("tr",{key:a},[e("td",[t._v(t._s(r.id))]),e("td",[t._v(t._s(r.building))]),e("td",[e("span",{class:["category-tag",t.getCategoryClass(r.category)]},[t._v(t._s(r.category))])]),e("td",[e("span",{class:["status-tag",t.getStatusClass(r.status)]},[t._v(t._s(r.status))])]),e("td",[t._v(t._s(t.formatDate(r.time)))]),e("td",{staticClass:"description-cell"},[t._v(t._s(r.description))]),e("td",[t._v(t._s(r.worker))]),e("td",[t._v(t._s(r.reporter))])])}),0)])]),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:t.prevPage}},[t._v("上一页")]),e("span",[t._v("第 "+t._s(t.currentPage)+" 页 / 共 "+t._s(t.totalPages)+" 页")]),e("button",{attrs:{disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v("下一页")])])])])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-icon total"},[e("i",{staticClass:"fas fa-tools"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-icon pending"},[e("i",{staticClass:"fas fa-clock"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-icon completed"},[e("i",{staticClass:"fas fa-check-circle"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-icon workers"},[e("i",{staticClass:"fas fa-user-cog"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-container"},[e("div",{staticClass:"chart",attrs:{id:"status-chart"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-container"},[e("div",{staticClass:"chart",attrs:{id:"building-chart"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-container"},[e("div",{staticClass:"chart",attrs:{id:"worker-chart"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-container"},[e("div",{staticClass:"chart",attrs:{id:"trend-chart"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-container"},[e("div",{staticClass:"chart",attrs:{id:"issue-chart"}})])}],i=(r(4114),r(2489),r(7588),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698),r(6532)),n={data(){return{timeRange:"month",selectedBuilding:["all"],selectedStatus:["all"],categoryChartType:"pie",statusChartType:"bar",trendType:"daily",searchTerm:"",sortColumn:"time",sortDirection:"desc",currentPage:1,pageSize:10,summary:{totalRepairs:0,pendingRepairs:0,completedRepairs:0,totalWorkers:0},buildings:["1栋","2栋","3栋","4栋","5栋","6栋","7栋","8栋"],categories:["空调","热水","网络","其他维修"],statuses:["待维修","已维修","已取消","已转接服务商"],workers:["张三","李四","王五","赵六","钱七","孙八"],repairRecords:[],filteredRecords:[],categoryPieChart:null,categoryBarChart:null,statusChart:null,buildingChart:null,workerChart:null,trendChart:null,issueChart:null}},computed:{totalPages(){return Math.ceil(this.filteredRecords.length/this.pageSize)},paginatedRecords(){const t=(this.currentPage-1)*this.pageSize,e=t+this.pageSize;return this.filteredRecords.slice(t,e)},filteredData(){let t=[...this.repairRecords];!this.selectedBuilding.includes("all")&&this.selectedBuilding.length>0&&(t=t.filter(t=>this.selectedBuilding.includes(t.building))),!this.selectedStatus.includes("all")&&this.selectedStatus.length>0&&(t=t.filter(t=>this.selectedStatus.includes(t.status)));const e=new Date;let r=new Date;switch(this.timeRange){case"week":r.setDate(e.getDate()-7);break;case"month":r.setMonth(e.getMonth()-1);break;case"quarter":r.setMonth(e.getMonth()-3);break;case"year":r.setFullYear(e.getFullYear()-1);break}return t=t.filter(t=>{const e=new Date(t.time);return e>=r}),t}},watch:{filteredData(){this.updateSummary(),this.renderCharts()},trendType(){this.renderTrendChart()},searchTerm(){this.renderIssueChart()}},created(){this.generateMockData()},mounted(){this.initCharts(),this.applyFilters()},methods:{generateMockData(){const t=[],e={"张三":["1栋","2栋"],"李四":["3栋","4栋"],"王五":["5栋","6栋"],"赵六":["7栋","8栋"],"钱七":["1栋","3栋","5栋"],"孙八":["2栋","4栋","6栋"]},r=new Date;r.setFullYear(r.getFullYear()-1);for(let a=1;a<=300;a++){const s=this.buildings[Math.floor(Math.random()*this.buildings.length)],i=this.categories[Math.floor(Math.random()*this.categories.length)],n=this.statuses[Math.floor(Math.random()*this.statuses.length)];let o="无";if("待维修"===n||"已维修"===n){const t=Object.keys(e).filter(t=>e[t].includes(s));t.length>0&&(o=t[Math.floor(Math.random()*t.length)])}const c=Math.floor(365*Math.random()*24*60*60*1e3),l=new Date(r.getTime()+c),u={"空调":["空调不制冷","空调噪音大","空调漏水","空调遥控器失灵"],"热水":["热水器不工作","水温不稳定","热水器漏水","没有热水"],"网络":["无法连接网络","网速慢","频繁断网","路由器故障"],"其他维修":["门窗损坏","灯管不亮","水管漏水","插座故障"]},d=u[i][Math.floor(Math.random()*u[i].length)];t.push({id:a,building:s,category:i,status:n,time:l,description:d,worker:o,reporter:`学生${Math.floor(1e3*Math.random())}`})}this.repairRecords=t,this.filteredRecords=[...t]},initCharts(){this.categoryPieChart=i.Ts(document.getElementById("category-pie-chart")),this.categoryBarChart=i.Ts(document.getElementById("category-bar-chart")),this.statusChart=i.Ts(document.getElementById("status-chart")),this.buildingChart=i.Ts(document.getElementById("building-chart")),this.workerChart=i.Ts(document.getElementById("worker-chart")),this.trendChart=i.Ts(document.getElementById("trend-chart")),this.issueChart=i.Ts(document.getElementById("issue-chart")),window.addEventListener("resize",()=>{this.categoryPieChart.resize(),this.categoryBarChart.resize(),this.statusChart.resize(),this.buildingChart.resize(),this.workerChart.resize(),this.trendChart.resize(),this.issueChart.resize()})},updateSummary(){this.summary.totalRepairs=this.filteredData.length,this.summary.pendingRepairs=this.filteredData.filter(t=>"待维修"===t.status).length,this.summary.completedRepairs=this.filteredData.filter(t=>"已维修"===t.status).length,this.summary.totalWorkers=new Set(this.filteredData.map(t=>t.worker).filter(t=>"无"!==t)).size},renderCharts(){this.renderCategoryChart(),this.renderStatusChart(),this.renderBuildingChart(),this.renderWorkerChart(),this.renderTrendChart(),this.renderIssueChart()},renderCategoryChart(){const t=this.categories.map(t=>({name:t,value:this.filteredData.filter(e=>e.category===t).length})),e={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",data:this.categories},series:[{name:"报修类别",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:t}]},r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:this.categories,axisLabel:{interval:0,rotate:0}},yAxis:{type:"value",name:"报修数量"},series:[{name:"报修数量",type:"bar",barWidth:"60%",data:t.map(t=>t.value)}]};"pie"===this.categoryChartType?this.categoryPieChart.setOption(e):this.categoryBarChart.setOption(r)},renderStatusChart(){const t=this.statuses.map(t=>this.filteredData.filter(e=>e.status===t).length),e={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:this.statuses,axisLabel:{interval:0,rotate:0}},yAxis:{type:"value",name:"报修数量"},series:[{name:"报修状态",type:"bar",barWidth:"60%",itemStyle:{color:t=>{const e={"待维修":"#5470C6","已维修":"#91CC75","已取消":"#EE6666","已转接服务商":"#FAC858"};return e[this.statuses[t.dataIndex]]}},data:t}]};this.statusChart.setOption(e)},renderBuildingChart(){const t=this.buildings.map(t=>({name:t,value:this.filteredData.filter(e=>e.building===t).length}));t.sort((t,e)=>e.value-t.value);const e={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",name:"报修数量"},yAxis:{type:"category",data:t.map(t=>t.name),inverse:!0},series:[{name:"报修数量",type:"bar",data:t.map(t=>t.value),itemStyle:{color:t=>{const e=[["#5470C6","#91CC75"],["#73C0DE","#73DE9F"],["#EE6666","#FAC858"],["#3BA272","#9A60B4"]],r=t.dataIndex%e.length;return new i.fA.W4(0,0,1,0,[{offset:0,color:e[r][0]},{offset:1,color:e[r][1]}])}}}]};this.buildingChart.setOption(e)},renderWorkerChart(){const t={};this.filteredData.forEach(e=>{"无"!==e.worker&&(t[e.worker]||(t[e.worker]={total:0,pending:0,completed:0}),t[e.worker].total++,"待维修"===e.status&&t[e.worker].pending++,"已维修"===e.status&&t[e.worker].completed++)});const e=Object.keys(t);let r=e.map(e=>({name:e,total:t[e].total,pending:t[e].pending,completed:t[e].completed}));r.sort((t,e)=>e.total-t.total);const a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){const e=t[0].data;return`${e.name}<br/>\n            总报修: ${e.total}<br/>\n            待处理: ${e.pending}<br/>\n            已完成: ${e.completed}`}},legend:{data:["总报修","待处理","已完成"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:r.map(t=>t.name),inverse:!0},series:[{name:"总报修",type:"bar",stack:"total",emphasis:{focus:"series"},data:r.map(t=>t.total)},{name:"待处理",type:"bar",stack:"total",emphasis:{focus:"series"},data:r.map(t=>t.pending)},{name:"已完成",type:"bar",stack:"total",emphasis:{focus:"series"},data:r.map(t=>t.completed)}]};this.workerChart.setOption(a)},renderTrendChart(){const t=new Date;let e=[],r=[];if("daily"===this.trendType)for(let s=29;s>=0;s--){const a=new Date;a.setDate(t.getDate()-s);const i=`${a.getMonth()+1}/${a.getDate()}`;e.push(i);const n=this.filteredData.filter(t=>{const e=new Date(t.time);return e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear()}).length;r.push(n)}else if("weekly"===this.trendType)for(let s=11;s>=0;s--){const a=new Date;a.setDate(t.getDate()-7*s-6);const i=new Date;i.setDate(t.getDate()-7*s);const n=`第${Math.floor(s/4)+1}周`;e.push(n);const o=this.filteredData.filter(t=>{const e=new Date(t.time);return e>=a&&e<=i}).length;r.push(o)}else for(let s=11;s>=0;s--){const a=new Date;a.setMonth(t.getMonth()-s);const i=`${a.getFullYear()}-${a.getMonth()+1}`;e.push(i);const n=this.filteredData.filter(t=>{const e=new Date(t.time);return e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear()}).length;r.push(n)}const a={tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value",name:"报修数量"},series:[{name:"报修数量",type:"line",stack:"Total",smooth:!0,lineStyle:{width:3},showSymbol:!1,areaStyle:{opacity:.8,color:new i.fA.W4(0,0,0,1,[{offset:0,color:"rgba(84, 112, 198, 0.5)"},{offset:1,color:"rgba(84, 112, 198, 0.1)"}])},emphasis:{focus:"series"},data:r}]};this.trendChart.setOption(a)},renderIssueChart(){const t={};this.filteredData.forEach(e=>{this.searchTerm&&!e.description.includes(this.searchTerm)||(t[e.description]||(t[e.description]=0),t[e.description]++)});let e=Object.keys(t).map(e=>({desc:e,count:t[e]}));e.sort((t,e)=>e.count-t.count),e=e.slice(0,10);const r={tooltip:{trigger:"item",formatter:"{b}: {c}"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",name:"出现次数"},yAxis:{type:"category",data:e.map(t=>t.desc),inverse:!0},series:[{name:"出现次数",type:"bar",data:e.map(t=>t.count),itemStyle:{color:t=>{const e=[["#5470C6","#91CC75"],["#73C0DE","#73DE9F"],["#EE6666","#FAC858"],["#3BA272","#9A60B4"]],r=t.dataIndex%e.length;return new i.fA.W4(0,0,1,0,[{offset:0,color:e[r][0]},{offset:1,color:e[r][1]}])}}}]};this.issueChart.setOption(r)},toggleChartType(t){"category"===t&&(this.categoryChartType="pie"===this.categoryChartType?"bar":"pie",this.renderCategoryChart())},sortBuildings(t){this.renderBuildingChart()},sortWorkers(t){this.renderWorkerChart()},sortTable(t){this.sortColumn===t?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=t,this.sortDirection="asc"),this.filteredRecords.sort((e,r)=>{let a=e[t],s=r[t];return"time"===t&&(a=new Date(a).getTime(),s=new Date(s).getTime()),a<s?"asc"===this.sortDirection?-1:1:a>s?"asc"===this.sortDirection?1:-1:0}),this.currentPage=1},getCategoryClass(t){return{"空调":"category-aircon","热水":"category-water","网络":"category-network","其他维修":"category-other"}[t]},getStatusClass(t){return{"待维修":"status-pending","已维修":"status-completed","已取消":"status-cancelled","已转接服务商":"status-transferred"}[t]},applyFilters(){this.filteredRecords=this.filteredData,this.updateSummary(),this.renderCharts(),this.currentPage=1},resetFilters(){this.timeRange="month",this.selectedBuilding=["all"],this.selectedStatus=["all"],this.applyFilters()},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},formatDate(t){const e=new Date(t);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}}},o=n,c=r(1656),l=(0,c.A)(o,a,s,!1,null,null,null),u=l.exports},9835:function(t){t.exports=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},a=e[t](r);return 1!==a.size||4!==a.values().next().value}catch(s){return!1}}}}]);
//# sourceMappingURL=561.51d5594d.js.map